{"version":3,"sources":["webpack:///./src/components/role/role.vue?61bc","webpack:///./src/services/resource.js","webpack:///src/components/role/role.vue","webpack:///./src/components/role/role.vue"],"names":["esExports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","type","icon","on","click","handleCreate","_v","_s","$t","model","value","callback","$$v","searchValue","expression","initTable","title","visible","dialogFormVisible","update:visible","$event","ref","rules","form","label-position","label-width","label","prop","auto-complete","$set","_l","resource","index","key","span","required","message","trigger","placeholder","item","multiple","staticStyle","float","preventDefault","removeResource","addResource","slot","dialogStatus","createRole","_e","editRole","directives","name","rawName","width","data","tableData","sort-change","handleSortChange","sortable","scopedSlots","_u","fn","scope","size","handleEdit","row","id","handleDelete","current-page","pagination","page","page-sizes","page-size","pageSize","layout","total","totalCount","size-change","handleSizeChange","current-change","handleCurrentChange","staticRenderFns","__webpack_exports__","_axios","__webpack_require__","getResourceList","query","axios","get","filter","sortBy","sort","getResourceAll","params","post","deleteResource","delete","editResource","put","getResource","api","api2","[object Object]","loading","allows","resourceOptions","operationOptions","min","max","formLabelWidth","methods","isSearch","$doRequest","getRoleList","$showErrorType","none","then","res","setTimeout","result","err","console","log","val","order","indexOf","splice","push","resources","permissions","$uuid","resetForm","$nextTick","$refs","clearValidate","forEach","validate","valid","addRole","getRole","allow","deleteRole","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3f39bc62_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_role_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_role_vue___default","a"],"mappings":"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","file":"static/js/2.1b77a5397b3c9d4e3c79.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container calendar-list-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.handleCreate}},[_vm._v(_vm._s(_vm.$t('common.add')))]),_vm._v(\" \"),_c('el-input',{model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"promary\"},on:{\"click\":_vm.initTable}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.$t('common.add') + _vm.$t('common.space') + _vm.$t('role.role'),\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticClass:\"demo-dynamic\",attrs:{\"rules\":_vm.rules,\"model\":_vm.form,\"label-position\":\"left\",\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('role.name'),\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_vm._l((_vm.form.allows),function(resource,index){return _c('el-form-item',{key:resource.key,attrs:{\"label\":'资源' + index}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"prop\":'allows.' + index + '.resources',\"rules\":{\n              required: true, message: '资源不能为空', trigger: 'blur'\n            }}},[_c('el-select',{attrs:{\"placeholder\":\"选择资源\"},model:{value:(resource.resources),callback:function ($$v) {_vm.$set(resource, \"resources\", $$v)},expression:\"resource.resources\"}},_vm._l((_vm.resourceOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":1}},[_vm._v(\"\\n          -\\n        \")]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"prop\":'allows.' + index + '.permissions',\"rules\":{\n              required: true, message: '操作不能为空', trigger: 'blur'\n            }}},[_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"选择权限\"},model:{value:(resource.permissions),callback:function ($$v) {_vm.$set(resource, \"permissions\", $$v)},expression:\"resource.permissions\"}},_vm._l((_vm.operationOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_vm._v(\"\\n          -\\n        \")]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-form-item',[_c('el-button',{staticStyle:{\"float\":\"right\"},on:{\"click\":function($event){$event.preventDefault();_vm.removeResource(resource)}}},[_vm._v(\"删除\")])],1)],1)],1)}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.addResource}},[_vm._v(\"新增资源\")])],1)],2),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(_vm._s(_vm.$t('common.cancel')))]),_vm._v(\" \"),(_vm.dialogStatus==='create')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.createRole}},[_vm._v(_vm._s(_vm.$t('common.confirm')))]):_vm._e(),_vm._v(\" \"),(_vm.dialogStatus==='edit')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editRole}},[_vm._v(_vm._s(_vm.$t('common.confirm')))]):_vm._e()],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData},on:{\"sort-change\":_vm.handleSortChange}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":_vm.$t('role.name'),\"sortable\":\"custom\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":_vm.$t('common.operation')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleEdit(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('common.edit')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDelete(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('common.delete')))])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.page,\"page-sizes\":[2, 5, 10, 20],\"page-size\":_vm.pagination.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.totalCount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3f39bc62\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/role/role.vue\n// module id = /Quc\n// module chunks = 2","import axios from '@/services/axios'\r\n\r\n// 获取资源列表\r\nexport const getResourceList = (query) => axios.get(`/acl_resource?page=${query.page}&pageSize=${query.pageSize}&filter=${query.filter}&sortBy=${query.sortBy}&sort=${query.sort}`)\r\n\r\n// 获取所有资源\r\nexport const getResourceAll = () => axios.get(`/acl_resource`)\r\n\r\n// 添加资源\r\nexport const addResource = (params) => axios.post('./acl_resource', params)\r\n\r\n// 删除资源\r\nexport const deleteResource = (id) => axios.delete('./acl_resource/' + id)\r\n\r\n// 编辑资源\r\nexport const editResource = (id, params) => axios.put('./acl_resource/' + id, params)\r\n\r\n// 获取单个资源\r\nexport const getResource = (id) => axios.get('/acl_resource/' + id)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/resource.js","<template>\r\n  <div class=\"app-container calendar-list-container\">\r\n    <div class=\"filter-container\">\r\n      <el-button class=\"filter-item\" @click=\"handleCreate\" type=\"primary\" icon=\"el-icon-edit\">{{$t('common.add')}}</el-button>\r\n      <el-input v-model=\"searchValue\"></el-input>\r\n      <el-button class=\"filter-item\" @click=\"initTable\" type=\"promary\">搜索</el-button>\r\n    </div>\r\n\r\n    <el-dialog :title=\"$t('common.add') + $t('common.space') + $t('role.role')\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :rules=\"rules\" ref=\"dataForm\" :model=\"form\" label-position=\"left\" label-width=\"120px\" class=\"demo-dynamic\">\r\n        <el-form-item :label=\"$t('role.name')\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-for=\"(resource, index) in form.allows\"\r\n          :label=\"'资源' + index\"\r\n          :key=\"resource.key\"\r\n        >\r\n          <el-col :span=\"8\">\r\n            <el-form-item\r\n              :prop=\"'allows.' + index + '.resources'\"\r\n              :rules=\"{\r\n                required: true, message: '资源不能为空', trigger: 'blur'\r\n              }\">\r\n              <el-select v-model=\"resource.resources\" placeholder=\"选择资源\">\r\n                <el-option\r\n                  v-for=\"item in resourceOptions\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"1\">\r\n            -\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item\r\n              :prop=\"'allows.' + index + '.permissions'\"\r\n              :rules=\"{\r\n                required: true, message: '操作不能为空', trigger: 'blur'\r\n              }\">\r\n              <el-select v-model=\"resource.permissions\" multiple  placeholder=\"选择权限\">\r\n                <el-option\r\n                  v-for=\"item in operationOptions\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"3\">\r\n            -\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-form-item>\r\n              <el-button @click.prevent=\"removeResource(resource)\" style=\"float:right\">删除</el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button @click=\"addResource\">新增资源</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">{{$t('common.cancel')}}</el-button>\r\n        <el-button type=\"primary\" v-if=\"dialogStatus==='create'\" @click=\"createRole\">{{$t('common.confirm')}}</el-button>\r\n        <el-button type=\"primary\" v-if=\"dialogStatus==='edit'\" @click=\"editRole\">{{$t('common.confirm')}}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"tableData\"\r\n      @sort-change=\"handleSortChange\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        prop=\"id\"\r\n        label=\"ID\"\r\n        width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"name\"\r\n        :label=\"$t('role.name')\"\r\n        sortable=\"custom\"\r\n        width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('common.operation')\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.row.id)\">{{$t('common.edit')}}</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">{{$t('common.delete')}}</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pagination.page\"\r\n      :page-sizes=\"[2, 5, 10, 20]\"\r\n      :page-size=\"pagination.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"pagination.totalCount\">\r\n    </el-pagination>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport * as api from '@/services/role'\r\nimport * as api2 from '@/services/resource'\r\n// import * as api2 from '@/services/resource'\r\nexport default {\r\n  data () {\r\n    return {\r\n      tableData: [],\r\n      pagination: {\r\n        totalCount: 0,\r\n        page: 1,\r\n        pageSize: 5,\r\n        sortBy: '',\r\n        sort: ''\r\n      },\r\n      searchValue: '',\r\n      loading: true,\r\n      dialogFormVisible: false,\r\n      dialogStatus: '',\r\n      form: {\r\n        name: '',\r\n        allows: []\r\n      },\r\n      resourceOptions: [],\r\n      operationOptions: [{\r\n        value: 'show',\r\n        label: '查看'\r\n      }, {\r\n        value: 'operate',\r\n        label: '操作'\r\n      }],\r\n      rules: {\r\n        name: [\r\n          {required: true, message: this.$t('validation.require') + this.$t('common.space') + this.$t('role.name')},\r\n          {min: 3, max: 12, message: '3-12' + this.$t('validation.characters')}\r\n        ]\r\n      },\r\n      formLabelWidth: '120px'\r\n    }\r\n  },\r\n  created () {\r\n    this.initTable()\r\n  },\r\n  methods: {\r\n    initTable (isSearch) {\r\n      this.loading = true\r\n      if (isSearch) {\r\n        this.pagination.page = 1\r\n      }\r\n      const query = {\r\n        page: this.pagination.page,\r\n        pageSize: this.pagination.pageSize,\r\n        filter: this.searchValue,\r\n        sortBy: this.pagination.sortBy,\r\n        sort: this.pagination.sort\r\n      }\r\n      this.$doRequest(api.getRoleList(query), '获取角色列表', this.$showErrorType.none).then((res) => {\r\n        setTimeout(() => {\r\n          this.loading = false\r\n        }, 200)\r\n        this.tableData = res.result\r\n        this.pagination.totalCount = res.totalCount\r\n      }, (err) => {\r\n        if (err) {\r\n          console.log(err)\r\n        }\r\n        setTimeout(() => {\r\n          this.loading = false\r\n        }, 200)\r\n      })\r\n    },\r\n    handleSizeChange (val) {\r\n      this.pagination.pageSize = val\r\n      this.initTable()\r\n    },\r\n    handleCurrentChange (val) {\r\n      this.pagination.page = val\r\n      this.initTable()\r\n    },\r\n    handleSortChange (val) {\r\n      this.pagination.sortBy = val.prop\r\n      if (val.order) {\r\n        this.pagination.sort = val.order === 'ascending' ? 'asc' : 'desc'\r\n      } else {\r\n        this.pagination.sort = null\r\n      }\r\n      this.initTable()\r\n    },\r\n    resetForm () {\r\n      this.form = {\r\n        name: '',\r\n        allows: []\r\n      }\r\n    },\r\n    removeResource (item) {\r\n      var index = this.form.allows.indexOf(item)\r\n      if (index !== -1) {\r\n        this.form.allows.splice(index, 1)\r\n      }\r\n    },\r\n    addResource () {\r\n      this.form.allows.push({\r\n        resources: '',\r\n        permissions: [],\r\n        key: this.$uuid()\r\n      })\r\n    },\r\n    handleCreate () {\r\n      this.resetForm()\r\n      this.dialogStatus = 'create'\r\n      this.dialogFormVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs['dataForm'].clearValidate()\r\n      })\r\n      this.$doRequest(api2.getResourceAll(), '获取资源列表', this.$showErrorType.none).then((res) => {\r\n        this.resourceOptions = []\r\n        res.result.forEach((item) => {\r\n          this.resourceOptions.push({\r\n            value: item.id,\r\n            label: item.name\r\n          })\r\n        })\r\n      })\r\n    },\r\n    createRole () {\r\n      this.$refs['dataForm'].validate((valid) => {\r\n        if (valid) {\r\n          const params = {\r\n            name: this.form.name,\r\n            allows: this.form.allows\r\n          }\r\n          this.$doRequest(api.addRole(params), '增加角色').then(() => {\r\n            this.initTable()\r\n            this.dialogFormVisible = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleEdit (id) {\r\n      this.$doRequest(api.getRole(id), '获取指定角色', this.$showErrorType.none).then((res) => {\r\n        let allows = []\r\n        for (let allow in res.allows) {\r\n          allows.push({\r\n            resources: allow,\r\n            permissions: res.allows[allow],\r\n            key: this.$uuid()\r\n          })\r\n        }\r\n        res.allows = allows\r\n        this.form = res || {}\r\n        this.dialogStatus = 'edit'\r\n        this.dialogFormVisible = true\r\n        this.$nextTick(() => {\r\n          this.$refs['dataForm'].clearValidate()\r\n        })\r\n        this.$doRequest(api2.getResourceAll(), '获取资源列表', this.$showErrorType.none).then((res) => {\r\n          this.resourceOptions = []\r\n          res.result.forEach((item) => {\r\n            this.resourceOptions.push({\r\n              value: item.id,\r\n              label: item.name\r\n            })\r\n          })\r\n        })\r\n      })\r\n    },\r\n    editRole () {\r\n      console.log('click')\r\n      this.$refs['dataForm'].validate((valid) => {\r\n        console.log('valid')\r\n        if (valid) {\r\n          const params = {\r\n            name: this.form.name,\r\n            allows: this.form.allows\r\n          }\r\n          this.$doRequest(api.editRole(this.form.id, params), '编辑角色').then(() => {\r\n            this.initTable()\r\n            this.dialogFormVisible = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleDelete (id, row) {\r\n      console.log('delete', id, row)\r\n      api.deleteRole(id).then(() => {\r\n        this.initTable()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  .demo-dynamic .el-input {\r\n    /*margin-right: 10px;*/\r\n    /*width: 270px;*/\r\n    /*vertical-align: top;*/\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/role/role.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3f39bc62\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./role.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3f39bc62\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/role/role.vue\n// module id = V8iA\n// module chunks = 2"],"sourceRoot":""}